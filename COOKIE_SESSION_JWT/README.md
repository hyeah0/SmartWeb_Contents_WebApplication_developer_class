# - 쿠키(Cookie)

- 사용자가 웹 사이트를 방문시 웹 사이트에서 <b>클라이언트의 컴퓨터에 저장</b>해 놓는 작은 파일
  - 쿠키의 크기는 4kb로 제한적이며, 300개 정도의 쿠키를 만들어서 사용할 수 있다.
- 클라이언트 컴퓨터에 저장해 놓은 공유정보를 필요할 때 여러 웹 페이지들이 사용할 수 있도록 매개 역할
  - 로그인시 받은 쿠키(로그인 아이디정보, 비밀번호정보가 담긴)를
    <br> 로그인이 필요한 요청을 받을때(예시 마이페이지, 주문내역..)마다
    <br> 받은 쿠키를 던져 요청을 하는 동작구조
- <b>정보를 헤더에 저장</b>
- <b>key과 value 로 이루어진 정보</b>, 야스키 문자만 가능
- 서버에서 생성 후 전송, 브라우저에 저장
- 설정한 유효기간 이후에 자동 삭제
- 서버 요청시 domain, path가 일치하는 경우에만 자동 전송

- [자바 쿠키,세션 메서드](https://github.com/hyeah0/SmartWeb_Contents_WebApplication_developer_class/tree/main/5_web/06_Spring/07_Cookie%26Session)
- [쿠키코드 예시](https://github.com/hyeah0/SmartWeb_Contents_WebApplication_developer_class/blob/main/5_web/06_Spring/07_Cookie%26Session/%EC%BD%94%EB%93%9C%EC%98%88%EC%8B%9C/%EC%BF%A0%ED%82%A4.md)

## - 쿠키 단점

- 민감한 정보까지 노출이 되어 보안이 좋지않다.
- 조작되어 들어올 가능성
- 웹 브라우저 마다 쿠키에 대한 지원 형태가 달라 다른 브라우저간의 공유 불가능
- 매번 아이디를 받아 인증해야하는 불편함

# - 세션(Session)

- 쿠키의 단점(민감 정보 노출)을 막기 위해 나온것
- 서로 관련된 요청, 응답을 하나로 묶은것(쿠키 이용)
- browser 마다 개별 저장소(session객체)를 서버에서 제공한다. (브라우저 요청 1 : 서버 응답 1)

## - 세션 특징

- 세션은 서버에서만 접근이 가능하다.
- 세션은 서버의 ⭐️메모리⭐️에 저장된다.
- 서버에 부하를 줄 수 있다.
- 쿠키의 기본 용량이 4kb, 300개로 제한적인 반면에 세션은 제한이 없다.
- 브라우저 당 한개의 세션이 생성 된다.
- 로그인 상태 유지 기능이나 쇼핑몰의 장바구니 담기 기능 등에 주로 사용된다.

## - 세션 단점

- 세션 저장소 문제 발생시 인증체계가 무너져 다른 인증된 유저 또한 인증이 불가능하다.
- 세션 저장소가 필수 존재하기 때문에 이를 사용하기 위한 비용이 발생
- 세션 ID가 탈취되었을때 세션 저장소를 지워버리면 되지만, 클라이언트 인척 위장하는 보안의 약점이 있다.
- 사용자가 많아질 수록 메모리를 많이 차지
- <b>매번</b>요청시 세션 저장소를 조회해야한다.(DB접근)

# - JWT(JSON Web Token)

- 하나의 인터넷 표준 인증 방식
- Json 형식의 데이터를 저장하는 토큰
- 서명된 토큰
  - 공개/개인키를 쌍으로 사용해 서명할 경우, 서명된 토큰이 정상 토큰인지 인증할 수 있다.

## - JWT 구성

<img src="https://github.com/hyeah0/Node.js/blob/main/05_Nodebird_API/a_md_img/JWT.png" width="100%">

- <b>Header(헤더)</b> : 토큰 종류와 해시 알고리즘 정보가 들어있다.
- <b>Payload(페이로드)</b> : 토큰의 내용물이 인코딩된 부분

  - 민감한 정보는 담지 않는다.
  - 상황에 따라 사용
  <table>
    <tr>
      <th>iss(Issuer)</th>
      <td>토큰 발급자</td>
    </tr>
    <tr>
      <th>sub(Subject)</th>
      <td>토큰 제목(토큰에서 사용자 식별값)</td>
    </tr>
    <tr>
      <th>aud(Audience)</th>
      <td>토큰 대상자</td>
    </tr>
    <tr>
      <th>exp(Expiration Time)</th>
      <td>토큰 만료시간</td>
    </tr>
    <tr>
      <th>nbf(Not Before)</th>
      <td>토큰 활성 날짜</td>
    </tr>
    <tr>
      <th>iat(Issued At)</th>
      <td>토큰 발급 시간</td>
    </tr>
    <tr>
      <th>jti(JWT Id)</th>
      <td>JWT 토큰 식별자(토큰 발급자가 여러명일때 구분하기 위한값)</td>
    </tr>
  </table>

- <b>Signature(시그니쳐)</b> : 서명, 일련의 문자열, 토큰이 변조 여부를 확인 가능

- [토큰 확인 홈페이지](https://jwt.io)

## - JWT 장점

- 세션 저장소와 같은 별도의 인증 저장소가 필수적으로 필요하지 않다.
- 클라이언트 상태를 서버가 저장하지 않아도 된다.
- 개인키 암호화를 통해 막아 데이터 보완성이 늘어난다.

## - JWT 단점

- 용량이 크다
- 요청시마다 토큰이 오가서 데이터양이 증가

- [spring JWT 사용(블로그참고)](https://brunch.co.kr/@jinyoungchoi95/1)
- [node.js JWT 사용]()
