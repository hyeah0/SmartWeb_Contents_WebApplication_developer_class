## 오라클 이클립스 연결 예시 코드

### - 일반

```
package com.khie.model;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class ConnectTest {

	Connection con = null;					// 데이터 베이스와 연동하는 객체
	PreparedStatement pstmt = null;			// 데이터 베이스에 sql문을 전송하는 객체
	ResultSet rs = null;					// sql문을 실행 후에 결과값을 가지고 있는 객체
	String sql = null; 						// 쿼리문을 저장할 변수

	public ConnectTest() {

		// 윈도우용
		// String dirver = "oracle.jdbc.driver.OracleDriver";
		// String url = "jdbc:oracle:thin:@localhost:1521:XE";
		// String user = "[사용자명]";
		// String password = "[비밀번호]";

		// 맥용
		String driver = "oracle.jdbc.driver.OracleDriver";
        String url = "jdbc:oracle:thin:@전자지갑이름_high?TNS_ADMIN=전자지갑경로";
        String user = "사용자이름";
        String password = "비밀번호";
        // option + command + c 전자지갑 파일 경로 저장 단축키

		try {

			// 1단계 : 오라클 드라이버를 메모리로 로딩
			Class.forName(driver);
            System.out.println("1단계 : 드라이버 로딩 성공!");

			// 2단계: 오라클 데이터베이스와 연결 작업 진행
			con = DriverManager.getConnection(url, user, password);
			System.out.println("2단계 : 데이터베이스 연결 성공!");

		}catch(Exception e) {
			System.out.println("2단계 : 데이터베이스 연결 실패!");
			e.printStackTrace();
		}

		try {
    		// 3단계 : 데이터베이스에 sql
			String sql = "select * "
					   + "  from dept"
					   + "  order by deptno desc";
    		pstmt = con.prepareStatement(sql);
    		System.out.println("3단계 : 테이블 연결완료");

    		// 4단계 : 데이터베이스에 SQL문을 전송 및 실행
    		// ResultSet 은 select 문의결과를 저장하는 객체
    		rs = pstmt.executeQuery();
    		System.out.println("4단계 : SQL문을 전송 및 실행");

    		// 5단계 : 데이터 출력
    		System.out.println("5단계 : 데이터 출력");
    		while (rs.next()) {
    			int deptno = rs.getInt("deptno");
    			String dname = rs.getString("dname");
    			String loc = rs.getString("loc");
    			System.out.println(deptno + "\t" + dname + "\t" + loc);
    		}

    		// 6단계 : 연결 객체 종료
    		rs.close();
    		pstmt.close();
    		con.close();
    		System.out.println("6단계 : 객체종료");

    	} catch (Exception e) {
    		e.printStackTrace();
    	}
    }


	public static void main(String[] args) {
		ConnectTest ct = new ConnectTest();
	}

}

```

### - 싱글턴 디자인

- 1~2단계 DB연동 메서드(오라클 드라이버로딩, 데이터베이스와 연결)
- 3~6단계 뽑고자 하는 자료에 따라 sql 실행

```
public class EmpDAO {

	/*
	 DAO 객체를 싱글턴 방식으로 사용
	 ProductDAO 객체를 싱글턴 방식으로 생성하기
	 1단계 : private 기본생성자
	 		  기본생성자의 접근제어자를 public 이 아닌 private 으로 변경해야한다.
			  외부에서 직접적으로 기본생성자를 호출하지 못하게 하기 위함

	 2단계 : ProductDAO 객체를 정적(static) 멤버로 선언

	 3단계 : 기본 생성자 대신에 싱글턴 객체를 return 하는
	        getInstance() 메서드 생성
	        getInstance()를 통해 기본 생성자를 외부에서 접근할 수 있도록 해준다.
 	*/

	// 멤버변수
	Connection con = null;						// 데이터 베이스와 연동하는 객체
	PreparedStatement pstmt = null;				// 데이터 베이스에 sql문을 전송하는 객체
	ResultSet rs = null;						// sql문을 실행 후에 결과값을 가지고 있는 객체
	String sql = null; 							// 쿼리문을 저장할 변수

	// 객체 변수
	private static EmpDAO instance;				// 싱글턴 : 2단계

	// 생성자
	private EmpDAO() {	}						// 싱글턴 : 1단계

	/**
	 * 싱글턴 객체 생성 메서드
	 * - EmpDAO getInstance()
	 * - 자료형 메서드명()
	 */
	public static EmpDAO getInstance() {	// 싱글턴 : 3단계

		if(instance == null) {
			instance = new EmpDAO();
		}

		return instance;
	}

	/**
	 * DB연동 메서드
	 * - openCon()
	 */
	public void openCon() {

		// 맥용
		String driver = "oracle.jdbc.driver.OracleDriver";
        String url = "jdbc:oracle:thin:@전자지갑이름_high?TNS_ADMIN=전자지갑경로";
        String user = "사용자이름";
        String password = "비밀번호";

		try {

			Class.forName(driver);
            System.out.println("1단계 : 드라이버 로딩 성공!");

			con = DriverManager.getConnection(url, user, password);
			System.out.println("2단계 : 데이터베이스 연결 성공!");

		}catch(Exception e) {
			e.printStackTrace();
			System.out.println("2단계 : 데이터베이스 연결 실패!");
		}

	}
```
